<div style="width: 100%; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #ffffff; line-height: 1.6; padding-bottom: 20px;">

    <!-- BRANDED HEADER -->
    <div style="background: linear-gradient(90deg, #305589 0%, #305589 45%, #c7d3d8 100%); padding: 40px 30px; border-radius: 15px 15px 0 0; border-bottom: 5px solid #c13c40; text-align: left;">
        <h2 style="color: #ffffff; font-size: 26pt; font-weight: bold; margin: 0; text-shadow: 1px 1px 3px rgba(0,0,0,0.3);">
            Psychology Foundations: Interactive Review
        </h2>
        <p style="color: #ffffff; font-size: 14pt; margin-top: 10px; opacity: 0.9;">
            Master key concepts through active recall and ‚ú® AI-powered study aids.
        </p>
    </div>

    <!-- INTRODUCTORY CONTENT SECTION -->
    <div style="padding: 30px; background-color: #f8fafc;">
        <div style="text-align: center; margin-bottom: 30px;">
            <img src="https://images.unsplash.com/photo-1507413245164-6160d8298b31?auto=format&fit=crop&q=80&w=800" 
                 alt="A clean, professional scientific representation of a human brain with glowing neural pathways." 
                 style="border-radius: 15px; border: 4px solid #305589; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 100%; max-width: 800px;">
            <p style="font-style: italic; font-size: 10pt; color: #555; margin-top: 10px;">
                Visualizing neural connectivity and the complexity of the human mind.
            </p>
        </div>
        
        <h3 style="color: #112844; font-size: 18pt; border-left: 5px solid #c13c40; padding-left: 15px; margin-bottom: 20px;">
            How to Use This Tool
        </h3>
        <p style="font-size: 14pt; color: #333; margin-bottom: 25px;">
            Active recall is one of the most effective ways to move information from short-term to long-term memory. Read the term on each card, try to define it in your own words, and use the <strong>Hint</strong> if you get stuck. If you're struggling to memorize a term, click the ‚ú® button to generate a custom mnemonic!
        </p>
    </div>

    <!-- ‚ú® CARD CREATOR SECTION -->
    <div style="padding: 0 30px 30px 30px; background-color: #f8fafc;">
        <div style="background-color: #c7d3d8; border-radius: 15px; padding: 25px; border: 2px dashed #305589;">
            <h3 style="color: #112844; font-size: 18pt; margin-top: 0;">‚ú® Card Creator</h3>
            <p style="font-size: 11pt; color: #112844; margin-bottom: 15px;">Add a new term to your study set. You can fill it out manually or use the <strong>Auto-Fill</strong> button!</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px;">
                <div>
                    <label style="display: block; font-weight: bold; color: #305589; margin-bottom: 5px;">Term</label>
                    <div style="display: flex; gap: 5px;">
                        <input type="text" id="new-term" placeholder="e.g. Self-Efficacy" style="flex-grow: 1; padding: 10px; border: 1px solid #305589; border-radius: 8px;">
                        <button onclick="autoFillCard()" title="Auto-fill with AI" style="background: #305589; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer;">‚ú®</button>
                    </div>
                </div>
                <div>
                    <label style="display: block; font-weight: bold; color: #305589; margin-bottom: 5px;">Hint</label>
                    <input type="text" id="new-hint" placeholder="Short mnemonic clue..." style="width: 100%; padding: 10px; border: 1px solid #305589; border-radius: 8px; box-sizing: border-box;">
                </div>
                <div>
                    <label style="display: block; font-weight: bold; color: #305589; margin-bottom: 5px;">Definition</label>
                    <input type="text" id="new-def" placeholder="Detailed definition..." style="width: 100%; padding: 10px; border: 1px solid #305589; border-radius: 8px; box-sizing: border-box;">
                </div>
                <div>
                    <label style="display: block; font-weight: bold; color: #305589; margin-bottom: 5px;">Example</label>
                    <input type="text" id="new-ex" placeholder="Real-world application..." style="width: 100%; padding: 10px; border: 1px solid #305589; border-radius: 8px; box-sizing: border-box;">
                </div>
            </div>
            <button onclick="addNewCard()" style="background-color: #c13c40; color: white; border: none; padding: 12px 25px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; border-bottom: 3px solid #112844;">
                Add Card to Study Set
            </button>
        </div>
    </div>

    <!-- FLASHCARD GRID -->
    <div id="flashcard-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; padding: 0 30px 40px 30px; background-color: #f8fafc;">
        <!-- Cards are populated below -->
    </div>

    <!-- ‚ú® AI TUTOR SECTION -->
    <div style="padding: 0 30px 40px 30px; background-color: #f8fafc;">
        <div style="background-color: #ffffff; border: 2px solid #305589; border-radius: 15px; padding: 30px; box-shadow: 0 10px 25px rgba(48, 85, 137, 0.1);">
            <h3 style="color: #305589; font-size: 18pt; margin-top: 0; display: flex; align-items: center;">
                ‚ú® Ask the LACC Psychology Tutor
            </h3>
            <p style="font-size: 12pt; color: #555; margin-bottom: 15px;">
                Stuck on a concept? Want a more detailed comparison between two terms? Ask our AI tutor below!
            </p>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="text" id="tutor-query" placeholder="e.g., What is the difference between Classical and Operant conditioning?" 
                       style="flex-grow: 1; padding: 12px; border: 1px solid #c7d3d8; border-radius: 8px; font-size: 12pt;">
                <button onclick="askTutor()" style="background-color: #305589; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; border-bottom: 3px solid #112844;">
                    ‚ú® Ask
                </button>
            </div>
            <div id="tutor-response" style="padding: 15px; border-radius: 8px; background-color: #f0f7ff; display: none; min-height: 50px; font-size: 13pt; color: #112844; border-left: 5px solid #c13c40;">
                <!-- AI Response goes here -->
            </div>
        </div>
    </div>

    <!-- BRANDED FOOTER -->
    <div style="background-color: #305589; padding: 20px; border-radius: 0 0 15px 15px; border-top: 5px solid #c13c40; text-align: center;">
        <p style="color: #ffffff; font-size: 12pt; margin: 0;">
            Created for Los Angeles City College Psychology Department | Powered by ‚ú® Gemini AI
        </p>
    </div>

</div>

<script>
    const apiKey = "";
    let flashcardData = [
        { term: "Neuroplasticity", hint: "Think about how a muscle grows or changes with exercise.", definition: "The brain's ability to reorganize itself by forming new neural connections throughout life.", example: "Learning a new language causes physical changes in brain structure." },
        { term: "Cognitive Dissonance", hint: "Mental discomfort when actions don't match beliefs.", definition: "Contradictory beliefs or values held at the same time.", example: "Smoking while knowing it causes cancer." },
        { term: "Classical Conditioning", hint: "Think of Pavlov and his dogs.", definition: "Learning through associations between environmental and natural stimuli.", example: "Flinching at the sight of a needle." },
        { term: "Operant Conditioning", hint: "Learning through rewards and punishments.", definition: "Behavior association with consequences.", example: "Giving a dog a treat for sitting." }
    ];

    async function callGemini(prompt, isJson = false) {
        let retries = 0;
        const maxRetries = 5;
        
        const payload = {
            contents: [{ parts: [{ text: prompt }] }],
            systemInstruction: { parts: [{ text: "You are a friendly, expert Psychology Tutor for Los Angeles City College (LACC). Keep your tone professional, warm, and academically rigorous." }] }
        };

        if (isJson) {
            payload.generationConfig = {
                responseMimeType: "application/json",
                responseSchema: {
                    type: "OBJECT",
                    properties: {
                        hint: { type: "STRING" },
                        definition: { type: "STRING" },
                        example: { type: "STRING" }
                    },
                    required: ["hint", "definition", "example"]
                }
            };
        }

        while (retries <= maxRetries) {
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response";
            } catch (error) {
                if (retries === maxRetries) return "Error connecting to AI.";
                await new Promise(r => setTimeout(r, Math.pow(2, retries) * 1000));
                retries++;
            }
        }
    }

    async function autoFillCard() {
        const term = document.getElementById('new-term').value;
        if (!term) return;

        const btn = event.target;
        btn.innerText = "‚è≥";
        
        const prompt = `Provide a short study hint, a clear psychology definition, and a real-world example for the term: "${term}".`;
        const result = await callGemini(prompt, true);
        
        try {
            const data = JSON.parse(result);
            document.getElementById('new-hint').value = data.hint;
            document.getElementById('new-def').value = data.definition;
            document.getElementById('new-ex').value = data.example;
        } catch (e) {
            console.error("Parsing error", e);
        } finally {
            btn.innerText = "‚ú®";
        }
    }

    function addNewCard() {
        const term = document.getElementById('new-term').value;
        const hint = document.getElementById('new-hint').value;
        const definition = document.getElementById('new-def').value;
        const example = document.getElementById('new-ex').value;

        if (!term || !definition) return;

        const newCard = { term, hint, definition, example };
        flashcardData.unshift(newCard); // Add to beginning of array
        
        // Reset form
        document.getElementById('new-term').value = '';
        document.getElementById('new-hint').value = '';
        document.getElementById('new-def').value = '';
        document.getElementById('new-ex').value = '';

        renderCards();
    }

    async function generateMnemonic(term, elementId) {
        const output = document.getElementById(elementId);
        output.style.display = 'block';
        output.innerText = "‚ú® Thinking...";
        const result = await callGemini(`Create a short, catchy mnemonic device for: "${term}".`);
        output.innerText = result;
    }

    async function askTutor() {
        const query = document.getElementById('tutor-query').value;
        const output = document.getElementById('tutor-response');
        if (!query) return;
        output.style.display = 'block';
        output.innerText = "‚ú® LACC Tutor is typing...";
        const result = await callGemini(query);
        output.innerText = result;
    }

    function renderCards() {
        const container = document.getElementById('flashcard-grid');
        container.innerHTML = ''; // Clear current grid
        flashcardData.forEach((item, index) => {
            const cardId = `mnemonic-${index}`;
            const html = `
                <div style="background-color: #ffffff; border: 1px solid #e2e8f0; border-left: 8px solid #305589; border-radius: 15px; padding: 25px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); display: flex; flex-direction: column;">
                    <h3 style="color: #305589; font-size: 18pt; margin-top: 0;">${item.term}</h3>
                    <details style="margin-bottom: 10px; cursor: pointer;">
                        <summary style="background-color: #c7d3d8; padding: 8px 15px; border-radius: 8px; font-weight: bold; color: #112844; list-style: none;">üîç Need a Hint?</summary>
                        <p style="padding: 10px; font-size: 12pt; color: #444;">${item.hint || 'No hint provided.'}</p>
                    </details>
                    <details style="margin-bottom: 10px; cursor: pointer;">
                        <summary style="background-color: #305589; padding: 10px 15px; border-radius: 8px; font-weight: bold; color: #ffffff; list-style: none; text-align: center;">‚úÖ Reveal Definition</summary>
                        <div style="padding: 15px; background-color: #f0f7ff; border-radius: 8px; margin-top: 10px;">
                            <p style="margin: 0; font-size: 14pt;">${item.definition}</p>
                        </div>
                    </details>
                    <div style="margin-top: auto;">
                        <details style="cursor: pointer; margin-bottom: 10px;">
                            <summary style="color: #c13c40; font-weight: bold; font-size: 12pt; text-decoration: underline; list-style: none;">üí° See Example</summary>
                            <p style="padding: 10px; font-style: italic; color: #555;">${item.example || 'No example provided.'}</p>
                        </details>
                        <button onclick="generateMnemonic('${item.term}', '${cardId}')" style="width: 100%; padding: 8px; background: white; border: 1px solid #305589; color: #305589; border-radius: 8px; font-weight: bold; cursor: pointer;">
                            ‚ú® Generate Mnemonic
                        </button>
                        <div id="${cardId}" style="display: none; margin-top: 10px; font-size: 11pt; padding: 10px; background: #fff8f8; border-radius: 8px; border: 1px solid #ffcccc; color: #c13c40;"></div>
                    </div>
                </div>
            `;
            container.innerHTML += html;
        });
    }

    window.onload = renderCards;
</script>